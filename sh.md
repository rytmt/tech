# Shell

## POSIX

### xargs
末尾に改行などの区切り文字が存在しない場合、最後の単語を受け取らない実装がある。  
対策のため、間に grep ^ などを挟んで、各行の末尾に必ず改行が存在するようにする。  



## 全般 (not POSIX)

### 未定義変数参照の禁止
`set -u`  
未定義の変数を参照する必要がある場合は、`${VAL-}` として、未定義変数を空文字に置き換える。


### xargs と while read の比較
- xargs のメリット
    + 複数プロセスを使用できるため、高速
- while read のメリット
    + POSIX の範囲で、`while IFS= read -r` とすることで、空白文字などを除去可能
    + xargs とは異なり、read のデリミタは改行もしくは IFS を使用する。
    + read の -r オプションにより、バックスラッシュによるデリミタのエスケープを無効にできる。  
      (xargs の -d オプションによるデリミタ指定は POSIX 外。)


