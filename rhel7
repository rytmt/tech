▼ Common administrative commands (rhel 5,6,7)
https://access.redhat.com/sites/default/files/attachments/rhel_5_6_7_cheatsheet_27x36_1014_jcs_web.pdf


▼ Memory managment (要ログイン)
https://access.redhat.com/solutions/16995


▼ 公式ドキュメント類
https://access.redhat.com/documentation/en/red-hat-enterprise-linux/?version=7/


▼ ファイルシステムのレイアウト変更
/bin, /sbin, /lib, /lib64 が /usr ディレクトリ配下に移動。シンボリックリンクとして元の場所に残っている。
/usr と / を分けると / をマウントしただけではほぼ何もできなくなるため、分けない方が良い。


▼ How do I migrate from RHEL5 to RHEL7 ? (要ログイン)
https://access.redhat.com/articles/1211223


▼ netstat と ss
TCP ソケットの情報を参照する際、netstat は /proc/net/tcp から、ss は /proc/${PID}/fd 内を readlink したものから、得ている。
(CentOS 6.7 で netstat -nat と ss -nat をそれぞれ strace したことより確認。サーバ高負荷時には /proc/net/tcp の参照に時間がかかる場合がある。)
CentOS 7.2 で ss コマンドを実行したところ、/proc/${PID}/fd を open していなかった。
ss では netlink を使用して高速化をしているよう。
procfs のファイルは proc_create 関数で作成


▼ minimal でインストールされないパッケージ
bash-completion (← systemctl コマンドの補完など)
telnet
chrony
ntpdate
bind-util (dig)
tcpdump
psmisc (pstree)
lsof
screen
wget
sysstat
rsync
abrt


▼ Network の設定
NetworkManager の使用が推奨されている。
nmtui が使用しやすいが、onboot=no の部分を変更できない。(RHEL7.2はデフォルトno)
onboot=yes とするために、以下のコマンドを実行。
nmcli c mod ${CONN_NAME} connection.autoconnect yes
変更の反映には systemctl restart NetworkManager を実行。
service unit として network も定義されているが、これは systemd により自動生成されたファイルであり、
/run/systemd/generator.late 配下に作成されており、/etc/rc.d/init.d/network スクリプトを実行するように記載されている。
sysvinit との互換性保持のために生成されているものと考えられる。
 - 余談
network.service は systemctl の list-unit-files では表示されないが、list-units では表示される。
list-unit-files ではインストールされた unit ファイルの一覧を表示させるため、network.service などが表示されない。
また、システム起動時に自動で起動するサービスは list-unit-files を enable で grep するだけでは足りず、
例えば multi-user を使用している場合、/usr/lib/systemd/system と /etc/systemd/system の multi-user.target.wants
ディレクトリ内のシンボリックリンク先も起動するため、これらも確認する。
(enable は unit ファイルの install セクションの wantedby を見ているだけ)
list-units では現在アクティブな unit が表示されるため、インストール済みのもの全ては表示できない。
systemctl list-units --all で inactive な unit も表示できるが、そもそも load されなかった unit は表示できない。



